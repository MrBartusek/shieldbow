import{_ as o,r as i,o as l,c,a,b as n,w as s,e,d}from"./app.ef83c763.js";const r={},p={id:"client",tabindex:"-1"},u=a("a",{class:"header-anchor",href:"#client","aria-hidden":"true"},"#",-1),h=e(),m=e("Client"),f=d(`<h3 id="client-constructor" tabindex="-1"><a class="header-anchor" href="#client-constructor" aria-hidden="true">#</a> Client constructor</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Client</span><span class="token punctuation">(</span><span class="token string">&#39;API_KEY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Here, your <code>API_KEY</code> is the key you want to use to make requests to the API.</p><p>This will create a new instance of the client, but it won&#39;t be ready for use yet. To make it usable, we move on towards the next section - <a href="#client-initialization">Client initialization</a>.</p><h3 id="client-initialization" tabindex="-1"><a class="header-anchor" href="#client-initialization" aria-hidden="true">#</a> Client initialization</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>client<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// Client options</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Below are the details of the initialization options.</p><ol><li><code>region</code>: The region you want to make requests to. This defaults to <code>na</code>.</li><li><code>locale</code>: The locale you want to use. This defaults to <code>en-US</code>. All regions also have a default locale. When you set the region, the locale will be set to the default locale for that region.</li><li><code>version</code>: The version of the data dragon files you want to use. This defaults to the latest (as per the region).</li><li><code>cache</code>: (Very basic) The caching settings. <ol><li><code>enabled</code>: Whether caching is enabled. This defaults to <code>true</code>.</li><li><code>localRoot</code>: The root directory for the local cache. This defaults to <code>./data</code>. Currently, only the data dragon (and community dragon/meraki) files can be cached locally.</li></ol></li></ol><p>Additionally, (and this is not configurable), the client will automatically cache (in memory) any data you fetch from the APIs.</p><ol start="5"><li><code>fetch</code>: The fetcher settings - the data you want to prefetch during initialization to avoid having to fetch it later. <ol><li><code>champions</code>: Whether to prefetch champions data. This defaults to <code>true</code>.</li><li><code>items</code>: Whether to prefetch items data. This defaults to <code>true</code>.</li><li><code>runes</code>: Whether to prefetch runes data. This defaults to <code>true</code>.</li><li><code>summonerSpells</code>: Whether to prefetch summoner spells data. This defaults to <code>true</code>.</li></ol></li></ol><p>This is the part that slows down your initialization. Most of which, is due to champions being fetched from 3 different sources and then being combined. This is done to have all sorts of data available about the champions.</p><p>This can be sped up by either disabling the prefetching or enabling the cache. If the cache is enabled, the first initialization will still be slow but the requests will be handled significantly faster.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>The data dragon files are fetched automatically when making a request to one of the following APIs.</p><ul><li>Spectator v4</li><li>Match v5</li><li>Champion Mastery v4</li></ul><p>Therefore, it is recommended to prefetch them to avoid having to delay these requests.</p></div><details class="custom-container details"><summary>A sample configuration</summary><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Client</span><span class="token punctuation">(</span><span class="token string">&#39;API_KEY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
   region<span class="token operator">:</span> <span class="token string">&#39;euw&#39;</span><span class="token punctuation">,</span> 
   cache<span class="token operator">:</span> <span class="token punctuation">{</span> 
     enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
     localRoot<span class="token operator">:</span> <span class="token string">&#39;shieldbow/data&#39;</span> 
   <span class="token punctuation">}</span><span class="token punctuation">,</span> 
   fetch<span class="token operator">:</span> <span class="token punctuation">{</span>
     champions<span class="token operator">:</span> <span class="token boolean">false</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>With this config, our client will be initialized quickly, the default region will be set to <code>euw</code>, the locale will be set to <code>en-GB</code>, which is the default locale for the region.</p><p>The data dragon files will be fetched from the API, but the champions will not be fetched.</p><p>The fetched files will be stored locally under the <code>&lt;root&gt;/shieldbow/data</code> directory. <code>&lt;root&gt;</code> is the root directory of your project.</p></details><h3 id="updating-locale-and-patch-version" tabindex="-1"><a class="header-anchor" href="#updating-locale-and-patch-version" aria-hidden="true">#</a> Updating locale and patch/version</h3><p>League of Legends is a global, constantly-evolving game. There are players from a lot of different regions. To allow fetching data in locales of all these various regions, the shieldbow client has the <code>updateLocale</code> utility.</p><p>It can be used as follows</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">updateLocale</span><span class="token punctuation">(</span><span class="token string">&#39;ko_KR&#39;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Here, the first argument is the new locale you want to use. <code>ko_KR</code> is the default Korean locale. The second argument (optional), is a <code>refetch</code> option. This defaults to <code>true</code> and will fetch all the data dragon data right away using the new locale. This can take a while (almost the same amount as initialization) if the data has not already been fetched and cached.</p><p>Similarly, every 2 weeks, the game is updated and all the values are updated. If you do not want to restart your app, you can simply use the <code>updatePatch</code> method which works in a similar way.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">updatePatch</span><span class="token punctuation">(</span><span class="token string">&#39;11.10&#39;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Here, the first argument is the new patch you want the information from. It must be the patch number and not the data dragon version. The second argument is the <code>refetch</code> option that works in the same way as <code>updateLocale</code>.</p><h3 id="rate-limiting" tabindex="-1"><a class="header-anchor" href="#rate-limiting" aria-hidden="true">#</a> Rate limiting</h3><p>As of now, the client can handle rate limiting automatically. But it is very limited. The known caveats are as follows.</p><ul><li>If you restart the client, it will reset the rate limiting, and you might go over the rate limit again.</li><li>If your app is huge, and you have different machines with different memories running the app the rate limiting is not shared and can cause issues.</li><li>It is only stored in memory so any case such as the above two where the client needs to be restarted or doesn&#39;t have access to the memory, rate limiting won&#39;t be able to work properly.</li></ul><p>But, if you are just getting started, you can ignore these caveats. You probably won&#39;t have these issues in a development environment.</p><blockquote><p>The library is still heavily in development. So this is a known issue being worked on.</p></blockquote><hr><h3 id="next-steps" tabindex="-1"><a class="header-anchor" href="#next-steps" aria-hidden="true">#</a> Next steps</h3><p>From this point onwards, in the guide&#39;s code examples, we will be assuming, we have initialized the client already as in the example above.</p>`,30),g=e("You can move on to the next part of the guide - "),v=e("Fetching data"),k=e(".");function b(y,w){const t=i("RouterLink");return l(),c("div",null,[a("h1",p,[u,h,n(t,{to:"/api/client.html"},{default:s(()=>[m]),_:1})]),f,a("p",null,[g,n(t,{to:"/guide/fetching.html"},{default:s(()=>[v]),_:1}),k])])}var T=o(r,[["render",b],["__file","client.html.vue"]]);export{T as default};
